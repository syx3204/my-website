<!DOCTYPE HTML>
<html>
<head>
    <title>宋泳贤的个人网页</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    
    <!-- 音乐播放器相关 -->
    <link rel="stylesheet" href="APlayer.min.css">
    <script src="APlayer.min.js"></script>
    <div id="aplayer" class="aplayer"  data-id="12422174133" data-server="netease" data-type="playlist" data-fixed="true" data-listfolded="true" data-order="random" data-theme="#5DADE2"></div> 
    <script src="Meting.min.js"></script>

    <!-- 其他样式和脚本 -->
    <!-- ... -->

    <style>
        /* 天气样式↓ */
        #weather-info {
            /* ... */
        }
        /* 其他样式 ... */
    </style>
</head>
<body>
    <!-- 页面内容 -->
    <!-- ... -->

    <!-- 天气div -->
    <div id="weather-info">
        <h2>天气（可能会不准确）</h2> 
        <p>位置: </p>
        <p>温度: </p>
        <p>天气状况: </p>
    </div>

    <!-- 页面其他内容 -->
    <!-- ... -->

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 使用 ip-api.com API 获取位置信息
            fetch('http://ip-api.com/json/')
                .then(response => response.json())
                .then(data => {
                    const city = data.city;
                    const region = data.regionName;

                    // 使用 cors-anywhere 代理服务获取天气数据
                    const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
                    const apiUrl = `http://wttr.in/${city}?format=j1`;

                    fetch(proxyUrl + apiUrl)
                        .then(response => response.json())
                        .then(weatherData => {
                            const weatherInfo = `
                                <h2>天气（可能会不准确）</h2> 
                                <p>位置: ${city},${region}</p>
                                <p>温度: ${weatherData.current_condition[0].temp_C}°C</p>
                                <p>天气状况: ${weatherData.current_condition[0].weatherDesc[0].value}</p>
                            `;
                            document.getElementById('weather-info').innerHTML = weatherInfo;
                        })
                        .catch(error => console.error('Error fetching weather data:', error));
                })
                .catch(error => console.error('Error fetching IP data:', error));
        });
    </script>

    <!-- 页面其他脚本 -->
    <!-- ... -->

</body>
</html>
